<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>æ— æ ‡é¢˜æ–‡æ¡£</title>
</head>

<body>
</body>
</html>
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å®¶æ—æ¨¡æ‹Ÿå™¨</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=ZCOOL+XiaoWei&display=swap">
    <style>
        :root {
            --strawberry-pink: #FF85A2;
            --cream-white: #FFF9F9;
            --light-gold: #FFD700;
            --soft-pink: #FFC1CC;
            --deep-pink: #E91E63;
            --text-brown: #5A3E36;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Ma Shan Zheng', cursive, 'ZCOOL XiaoWei', serif;
            background-color: var(--cream-white);
            color: var(--text-brown);
            line-height: 1.6;
            padding: 10px;
            max-width: 100%;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(255, 133, 162, 0.05) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(255, 215, 0, 0.05) 0%, transparent 20%);
        }
        
        .game-container {
            max-width: 100%;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .header-card {
            background: linear-gradient(145deg, var(--cream-white), #ffeef2);
            border-radius: 20px;
            padding: 20px;
            border: 3px solid var(--strawberry-pink);
            box-shadow: 0 8px 25px rgba(255, 133, 162, 0.15);
            position: relative;
            overflow: hidden;
        }
        
        .header-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--strawberry-pink), var(--light-gold));
        }
        
        .game-title {
            text-align: center;
            font-size: 28px;
            color: #C2185B;
            margin-bottom: 10px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        
        .game-title::after {
            content: "ğŸŒ¸";
            margin-left: 10px;
        }
        
        .game-title::before {
            content: "ğŸŒ¸";
            margin-right: 10px;
        }
        
        .time-display {
            text-align: center;
            background: linear-gradient(90deg, var(--strawberry-pink), var(--deep-pink));
            color: white;
            padding: 8px 20px;
            border-radius: 50px;
            display: inline-block;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(255, 133, 162, 0.3);
            margin-bottom: 15px;
        }
        
        .card {
            background: linear-gradient(145deg, #fff, #ffeef2);
            border-radius: 18px;
            padding: 18px;
            border: 2px solid var(--soft-pink);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .card-header {
            font-size: 20px;
            color: var(--strawberry-pink);
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px dashed var(--soft-pink);
            display: flex;
            align-items: center;
        }
        
        .card-header::before {
            content: "ğŸ“";
            margin-right: 10px;
            font-size: 22px;
        }
        
        .info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px dotted var(--soft-pink);
        }
        
        .info-label {
            font-weight: bold;
            color: #C2185B;
            flex: 1;
        }
        
        .info-value {
            flex: 1.5;
            text-align: right;
        }
        
        .progress-container {
            margin: 12px 0;
        }
        
        .progress-label {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .progress-bar {
            height: 20px;
            background-color: #FFE4E9;
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid var(--strawberry-pink);
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--strawberry-pink), var(--deep-pink));
            border-radius: 10px;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 8px;
            font-size: 12px;
            color: white;
            font-weight: bold;
        }
        
        .tag {
            display: inline-block;
            background: var(--strawberry-pink);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            margin-right: 6px;
            margin-bottom: 6px;
        }
        
        .family-tree {
            background: #FFF0F5;
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
            border: 1px dashed var(--strawberry-pink);
            font-size: 15px;
            line-height: 1.8;
        }
        
        .tree-level-1 {
            margin-left: 0;
            font-weight: bold;
        }
        
        .tree-level-2 {
            margin-left: 20px;
            position: relative;
        }
        
        .tree-level-2::before {
            content: "â”œâ”€";
            position: absolute;
            left: -15px;
            color: var(--strawberry-pink);
        }
        
        .tree-level-3 {
            margin-left: 40px;
            position: relative;
        }
        
        .tree-level-3::before {
            content: "â””â”€";
            position: absolute;
            left: -20px;
            color: var(--strawberry-pink);
        }
        
        .events-section {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        @media (max-width: 768px) {
            .events-section {
                grid-template-columns: 1fr;
            }
        }
        
        .event-card {
            background: white;
            border-radius: 15px;
            padding: 15px;
            border: 2px solid var(--soft-pink);
            transition: all 0.3s ease;
        }
        
        .event-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(255, 133, 162, 0.2);
            border-color: var(--strawberry-pink);
        }
        
        .event-title {
            font-size: 18px;
            color: #C2185B;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .event-title::before {
            content: "ğŸ“‹";
            margin-right: 8px;
        }
        
        .event-description {
            font-size: 14px;
            margin-bottom: 15px;
            color: #666;
        }
        
        .event-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .event-option {
            background: #FFF0F5;
            border: 1px solid var(--soft-pink);
            border-radius: 10px;
            padding: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 14px;
        }
        
        .event-option:hover {
            background: #FFE4E9;
            border-color: var(--strawberry-pink);
            transform: translateX(5px);
        }
        
        .event-option::before {
            content: "â–¸";
            color: var(--strawberry-pink);
            margin-right: 8px;
            font-weight: bold;
        }
        
        .control-buttons {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 2px dashed var(--strawberry-pink);
        }
        
        .control-btn {
            background: linear-gradient(145deg, var(--strawberry-pink), var(--deep-pink));
            color: white;
            border: none;
            border-radius: 50px;
            padding: 14px 24px;
            font-family: 'Ma Shan Zheng', cursive;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(255, 133, 162, 0.3);
            transition: all 0.3s ease;
            flex: 1;
            min-width: 150px;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .control-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 133, 162, 0.5);
        }
        
        .control-btn::before {
            margin-right: 8px;
            font-size: 18px;
        }
        
        #continue-btn::before {
            content: "â­ï¸";
        }
        
        #restart-btn::before {
            content: "ğŸ”„";
        }
        
        #query-btn::before {
            content: "ğŸ”";
        }
        
        #daily-btn::before {
            content: "ğŸ“–";
        }
        
        #save-btn::before {
            content: "ğŸ’¾";
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(90deg, var(--strawberry-pink), var(--deep-pink));
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            display: none;
            max-width: 300px;
            animation: slideIn 0.5s ease;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: var(--cream-white);
            border-radius: 20px;
            padding: 25px;
            max-width: 90%;
            max-height: 80%;
            overflow-y: auto;
            border: 3px solid var(--strawberry-pink);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .modal-header {
            font-size: 24px;
            color: #C2185B;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--strawberry-pink);
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .character-details {
            background: #FFF0F5;
            border-radius: 15px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .character-name {
            font-size: 20px;
            color: #C2185B;
            margin-bottom: 10px;
        }
        
        .status-icon {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 5px;
        }
        
        .status-healthy {
            background-color: #4CAF50;
        }
        
        .status-pregnant {
            background-color: #9C27B0;
        }
        
        .status-ill {
            background-color: #F44336;
        }
        
        .pill {
            display: inline-block;
            background: linear-gradient(90deg, #FFD700, #FFC107);
            color: #8B4513;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 12px;
            margin-right: 5px;
            margin-bottom: 5px;
        }
        
        .season-icon {
            font-size: 24px;
            margin-right: 10px;
        }
        
        .spring { color: #4CAF50; }
        .summer { color: #FF9800; }
        .autumn { color: #795548; }
        .winter { color: #2196F3; }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- æ¸¸æˆæ ‡é¢˜å’Œæ—¶é—´ -->
        <div class="header-card">
            <h1 class="game-title">å®¶æ—æ¨¡æ‹Ÿå™¨</h1>
            <div style="text-align: center; margin-bottom: 15px;">
                <div class="time-display" id="time-display">å¤§å‘¨ç‹æœ Â· æ°¸æ˜Œä¸‰å¹´ Â· æ˜¥äºŒæœˆ</div>
                <div style="font-size: 14px; color: #888; margin-top: 5px;">ğŸŒ¸ é‡å†œæŠ‘å•† Â· åŒ ç±ä¸ºå°Š Â· å­å—£å…´æ—º ğŸŒ¸</div>
            </div>
        </div>
        
        <!-- ä¸–ç•Œä¿¡æ¯å¡ç‰‡ -->
        <div class="card">
            <div class="card-header">ğŸŒ ä¸–ç•Œä¿¡æ¯</div>
            <div class="info-row">
                <div class="info-label">æ—¶é—´</div>
                <div class="info-value" id="current-time">æ°¸æ˜Œä¸‰å¹´äºŒæœˆåˆäº”</div>
            </div>
            <div class="info-row">
                <div class="info-label">åœ°ç‚¹</div>
                <div class="info-value" id="current-location">é”¦å· Â· ä¸´å®‰å¿ Â· æ¡ƒèŠ±æ‘</div>
            </div>
            <div class="info-row">
                <div class="info-label">å­£èŠ‚</div>
                <div class="info-value">
                    <span class="season-icon spring">ğŸŒ¸</span> æ˜¥å­£ Â· ç”Ÿæœºç›ç„¶
                </div>
            </div>
            <div class="info-row">
                <div class="info-label">æ–°é—»</div>
                <div class="info-value" id="current-news">æœå»·å‘å¸ƒæ–°å‚¬ç”Ÿä»¤ï¼Œå®¶æ—äººå£å¢é•¿å°†è·å˜‰å¥–</div>
            </div>
        </div>
        
        <!-- å®¶æ—æ¦‚å†µå¡ç‰‡ -->
        <div class="card">
            <div class="card-header">ğŸ  å®¶æ—æ¦‚å†µ</div>
            <div class="info-row">
                <div class="info-label">å®¶æ—æµæ´¾</div>
                <div class="info-value">
                    <span class="tag" id="family-style">è€•è¯»ä¼ å®¶</span>
                    <span class="pill">ç§‘ä¸¾æˆåŠŸç‡+15%</span>
                    <span class="pill">å“¥å„¿æ°”è´¨+10</span>
                </div>
            </div>
            <div class="info-row">
                <div class="info-label">å®¶æ—æ°”è¿</div>
                <div class="info-value">
                    <div class="progress-container">
                        <div class="progress-label">
                            <span>ç§¯å–„ä½™åº†</span>
                            <span id="fortune-value">78%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="fortune-bar" style="width: 78%;">78%</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="info-row">
                <div class="info-label">å®¶æ—å¨æœ›</div>
                <div class="info-value">
                    <div class="progress-container">
                        <div class="progress-label">
                            <span>å£°æœ›</span>
                            <span id="prestige-value">65/100</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="prestige-bar" style="width: 65%;">65%</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="info-row">
                <div class="info-label">å®¶æ—èµ„é‡‘</div>
                <div class="info-value">
                    <div style="font-weight: bold; color: #C2185B;" id="family-funds">1,250 ä¸¤</div>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 42%; background: linear-gradient(90deg, #4CAF50, #8BC34A);">å……è¶³</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- æ—é•¿ä¿¡æ¯å¡ç‰‡ -->
        <div class="card">
  <div class="card-header">ğŸ® æ—é•¿ä¿¡æ¯</div>
  <div class="character-details">
    <div class="character-name">é¢‚æ˜è¿œ (å­—å¾·æ˜­)</div>
    <div class="info-row">
      <div class="info-label">å¹´é¾„</div>
      <div class="info-value" id="age-value">30å²</div>
    </div>
    <!-- å…¶ä»–ä¿¡æ¯è¡Œ -->
  </div>
</div>

<script>
  // éšæœºå¹´é¾„é€»è¾‘
  let minAge = 18;
  let maxAge = 60;
  let randomAge = Math.floor(Math.random() * (maxAge - minAge + 1)) + minAge;
  document.getElementById('age-value').textContent = randomAge + 'å²';
</script>
                <div class="info-row">
                    <div class="info-label">å…ˆå¤©èµ„è´¨</div>
                    <div class="info-value">
                        <span class="pill">ä½“é­„78</span>
                        <span class="pill">æ™ºæ…§85</span>
                        <span class="pill">é­…åŠ›70</span>
                        <span class="pill">æ°”è¿65</span>
                    </div>
                </div>
                <div class="info-row">
                    <div class="info-label">èƒ½åŠ›æ•°å€¼</div>
                    <div class="info-value">
                        <span class="pill" style="background: linear-gradient(90deg, #2196F3, #03A9F4);">æ–‡æ²»82</span>
                        <span class="pill" style="background: linear-gradient(90deg, #F44336, #E91E63);">æ­¦åŠŸ61</span>
                        <span class="pill" style="background: linear-gradient(90deg, #9C27B0, #673AB7);">æŠ€è‰º45</span>
                    </div>
                </div>
                <div class="info-row">
                    <div class="info-label">æ€§æ ¼ç‰¹è´¨</div>
                    <div class="info-value">ç¨³é‡æŒå®¶ Â· é‡è§†æ•™è‚² Â· ç•¥æœ‰ä¿å®ˆ</div>
                </div>
            </div>
        </div>
        
        <!-- å®…é™¢æƒ…å†µå¡ç‰‡ -->
        <div class="card">
            <div class="card-header">ğŸ¡ å®…é™¢æƒ…å†µ</div>
            <div class="family-tree">
                <div class="tree-level-1">ğŸ‘¨ æ—é•¿ï¼šé¢‚æ˜è¿œ (32å²) Â· é¢‚å®¶å®¶ä¸»</div>
                <div class="tree-level-2">
                    ğŸ‘© æ­£å›ï¼šæ—æ¸…è· (29å²) 
                    <span class="status-icon status-pregnant"></span>å­•ä¸‰æœˆ
                    <span class="pill" style="background: linear-gradient(90deg, #F44336, #E91E63);">å­•ç—£ï¼šæ­£çº¢</span>
                    <span class="pill" style="background: linear-gradient(90deg, #4CAF50, #8BC34A);">æ€§æ ¼ï¼šè´¤æƒ </span>
                </div>
                <div class="tree-level-3">
                    ğŸ§’ é•¿å­ï¼šé¢‚æ–‡è½© (8å²) 
                    <span class="pill" style="background: linear-gradient(90deg, #2196F3, #03A9F4);">èµ„è´¨ï¼šèªæ…§</span>
                    <span class="pill">å­¦å ‚ï¼šæ–‡è¯¾</span>
                </div>
                <div class="tree-level-3">
                    ğŸ§’ æ¬¡å­ï¼šé¢‚æ–‡æµ© (5å²) 
                    <span class="pill">èµ„è´¨ï¼šæ™®é€š</span>
                    <span class="pill">å¹¼å¹´</span>
                </div>
                <div class="tree-level-2">
                    ğŸ‘© ä¾§ä¾ï¼šæŸ³å¨‡å„¿ (24å²) 
                    <span class="status-icon status-healthy"></span>å¥åº·
                    <span class="pill" style="background: linear-gradient(90deg, #FF9800, #FFC107);">å­•ç—£ï¼šæµ…ç²‰</span>
                    <span class="pill" style="background: linear-gradient(90deg, #FF9800, #FFC107);">æ€§æ ¼ï¼šå¨‡æ†¨</span>
                </div>
                <div class="tree-level-3">
                    ğŸ‘§ é•¿å“¥å„¿ï¼šé¢‚ç‰ç‘¶ (12å²) 
                    <span class="pill" style="background: linear-gradient(90deg, #FF9800, #FFC107);">å­•ç—£ï¼šæµ…ç²‰</span>
                    <span class="pill">é—ºå¡¾ï¼šä»ªæ€</span>
                </div>
                <div class="tree-level-2">
                    ğŸ‘© ä¾§ä¾ï¼šèµµæ…§å¨˜ (26å²) 
                    <span class="status-icon status-healthy"></span>å¥åº·
                    <span class="pill" style="background: linear-gradient(90deg, #F44336, #E91E63);">å­•ç—£ï¼šæ­£çº¢</span>
                    <span class="pill" style="background: linear-gradient(90deg, #2196F3, #03A9F4);">æ€§æ ¼ï¼šç²¾æ˜</span>
                </div>
                <div class="tree-level-3">
                    ğŸ‘§ æ¬¡å“¥å„¿ï¼šé¢‚ç‰å©· (3å²) 
                    <span class="pill">å­•ç—£ï¼šæœªå®š</span>
                    <span class="pill">å¹¼å¹´</span>
                </div>
            </div>
            <div class="info-row">
                <div class="info-label">åå®…å’Œè°åº¦</div>
                <div class="info-value">
                    <div class="progress-container">
                        <div class="progress-label">
                            <span>å®¶åº­å’Œç¦</span>
                            <span id="harmony-value">82/100</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="harmony-bar" style="width: 82%; background: linear-gradient(90deg, #9C27B0, #673AB7);">82%</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- æœ¬æœˆäº‹ä»¶ -->
        <div class="card">
            <div class="card-header">ğŸ“… æœ¬æœˆäº‹ä»¶</div>
            <div style="background: #FFF0F5; border-radius: 10px; padding: 12px; margin-bottom: 15px; border-left: 5px solid var(--light-gold);">
                <div style="display: flex; align-items: flex-start;">
                    <div style="font-size: 24px; margin-right: 10px;">ğŸ“¢</div>
                    <div>
                        <div style="font-weight: bold; color: #C2185B; margin-bottom: 5px;">æœ¬æœˆè¦äº‹</div>
                        <div id="month-summary">æ˜¥è€•æ—¶èŠ‚å·²è‡³ï¼Œéœ€åˆ†é…åŠ³åŠ›å®‰æ’å†œäº‹ï¼›å¿é‡Œå°†ä¸¾åŠä¸Šå·³èŠ‚è¸é’ï¼Œå¯å¸¦å“¥å„¿å‚ä¸ï¼›åª’å©†ç‹æ°ä¸Šé—¨ä¸ºé•¿å“¥å„¿è¯´äº²ã€‚</div>
                    </div>
                </div>
            </div>
            
            <div class="events-section" id="events-section">
                <!-- äº‹ä»¶å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
        
        <!-- ç¤¾äº¤ç½‘ç»œå¡ç‰‡ -->
        <div class="card">
            <div class="card-header">ğŸ¤ ç¤¾äº¤ç½‘ç»œ</div>
            <div class="info-row">
                <div class="info-label">åª’å©†å…³ç³»</div>
                <div class="info-value">
                    <span class="tag">ç‹æ°(å‹å¥½)</span>
                    <span class="tag">ææ°(æ™®é€š)</span>
                </div>
            </div>
            <div class="info-row">
                <div class="info-label">å®˜åºœäººè„‰</div>
                <div class="info-value">
                    <span class="tag">å¿ä¸(ç›¸è¯†)</span>
                    <span class="tag">ä¸»ç°¿(å‹å¥½)</span>
                </div>
            </div>
            <div class="info-row">
                <div class="info-label">é‚»é‡Œå…³ç³»</div>
                <div class="info-value">
                    <div class="progress-container">
                        <div class="progress-label">
                            <span>ç§¯å–„ä¹‹å®¶</span>
                            <span>95/100</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 95%; background: linear-gradient(90deg, #4CAF50, #8BC34A);">95%</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="info-row">
                <div class="info-label">ç›‘è§†åº¦(ç‰ç‘¶)</div>
                <div class="info-value">
                    <div class="progress-container">
                        <div class="progress-label">
                            <span>åèŠ‚ä¿æŠ¤</span>

                            <span>45/100</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 45%;">45%</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- æ§åˆ¶æŒ‰é’® -->
        <div class="control-buttons">
            <button class="control-btn" id="continue-btn">ç»§ç»­</button>
            <button class="control-btn" id="restart-btn">é‡å¼€</button>
            <button class="control-btn" id="query-btn">æŸ¥è¯¢</button>
            <button class="control-btn" id="daily-btn">æ—¥å¸¸</button>
            <button class="control-btn" id="save-btn">å­˜æ¡£</button>
        </div>
    </div>
    
    <!-- é€šçŸ¥æ¶ˆæ¯ -->
    <div class="notification" id="notification"></div>
    
    <!-- æŸ¥è¯¢æ¨¡æ€æ¡† -->
    <div class="modal" id="query-modal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal('query-modal')">Ã—</button>
            <div class="modal-header">ğŸ” ä¿¡æ¯æŸ¥è¯¢</div>
            <div style="margin-bottom: 15px;">
                <input type="text" id="search-input" placeholder="è¾“å…¥äººç‰©å§“åã€äº§ä¸šåç§°æˆ–äº‹ä»¶ç¼–å·..." style="width: 100%; padding: 10px; border-radius: 8px; border: 2px solid var(--soft-pink); font-family: inherit;">
            </div>
            <div id="query-results">
                <!-- æŸ¥è¯¢ç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
            </div>
        </div>
    </div>
    
    <!-- æ—¥å¸¸å†…å®¹æ¨¡æ€æ¡† -->
    <div class="modal" id="daily-modal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal('daily-modal')">Ã—</button>
            <div class="modal-header">ğŸ“– æ—¥å¸¸ç”Ÿæ´»</div>
            <div id="daily-content" style="line-height: 1.8; max-height: 400px; overflow-y: auto;">
                <!-- æ—¥å¸¸å†…å®¹å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
            </div>
        </div>
    </div>
    
    <!-- äº‹ä»¶ç»“æœæ¨¡æ€æ¡† -->
    <div class="modal" id="event-result-modal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal('event-result-modal')">Ã—</button>
            <div class="modal-header" id="event-result-title">äº‹ä»¶ç»“æœ</div>
            <div id="event-result-content" style="line-height: 1.8;">
                <!-- äº‹ä»¶ç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
            </div>
        </div>
    </div>

    <script>
        // æ¸¸æˆçŠ¶æ€æ•°æ®
        const gameState = {
            // æ—¶é—´ä¿¡æ¯
            year: 3,
            month: 2,
            day: 5,
            season: "æ˜¥",
            
            // åœ°ç‚¹ä¿¡æ¯
            region: "é”¦å·",
            county: "ä¸´å®‰å¿",
            village: "æ¡ƒèŠ±æ‘",
            
            // å®¶æ—ä¿¡æ¯
            familyName: "é¢‚",
            familyStyle: "è€•è¯»ä¼ å®¶",
            fortune: 78,
            prestige: 65,
            funds: 1250,
            harmony: 82,
            
            // è¡ŒåŠ¨ç‚¹
            actionPoints: 3,
            maxActionPoints: 3,
            
            // äººç‰©æ•°æ®
            characters: {
                // æ—é•¿
                patriarch: {
                    name: "é¢‚æ˜è¿œ",
                    courtesyName: "å¾·æ˜­",
                    age: 32,
                    constitution: 78,
                    wisdom: 85,
                    charm: 70,
                    luck: 65,
                    governance: 82,
                    martial: 61,
                    skill: 45,
                    traits: ["ç¨³é‡æŒå®¶", "é‡è§†æ•™è‚²", "ç•¥æœ‰ä¿å®ˆ"]
                },
                
                // æ­£å›
                principalSpouse: {
                    name: "æ—æ¸…è·",
                    age: 29,
                    pregnancyMark: "æ­£çº¢",
                    personality: "è´¤æƒ ",
                    pregnant: true,
                    pregnancyMonth: 3,
                    health: "å¥åº·"
                },
                
                // ä¾§ä¾
                concubines: [
                    {
                        name: "æŸ³å¨‡å„¿",
                        age: 24,
                        pregnancyMark: "æµ…ç²‰",
                        personality: "å¨‡æ†¨",
                        pregnant: false,
                        health: "å¥åº·"
                    },
                    {
                        name: "èµµæ…§å¨˜",
                        age: 26,
                        pregnancyMark: "æ­£çº¢",
                        personality: "ç²¾æ˜",
                        pregnant: false,
                        health: "å¥åº·"
                    }
                ],
                
                // å­å—£
                children: [
                    {
                        name: "é¢‚æ–‡è½©",
                        age: 8,
                        gender: "male",
                        intelligence: "èªæ…§",
                        education: "æ–‡è¯¾",
                        health: "å¥åº·"
                    },
                    {
                        name: "é¢‚æ–‡æµ©",
                        age: 5,
                        gender: "male",
                        intelligence: "æ™®é€š",
                        education: "å¹¼å¹´",
                        health: "å¥åº·"
                    },
                    {
                        name: "é¢‚ç‰ç‘¶",
                        age: 12,
                        gender: "å“¥å„¿",
                        pregnancyMark: "æµ…ç²‰",
                        education: "ä»ªæ€",
                        surveillance: 45,
                        health: "å¥åº·"
                    },
                    {
                        name: "é¢‚ç‰å©·",
                        age: 3,
                        gender: "å“¥å„¿",
                        pregnancyMark: "æœªå®š",
                        education: "å¹¼å¹´",
                        health: "å¥åº·"
                    }
                ]
            },
            
            // ç¤¾äº¤å…³ç³»
            relationships: {
                matchmakers: [
                    { name: "ç‹æ°", relation: "å‹å¥½" },
                    { name: "ææ°", relation: "æ™®é€š" }
                ],
                officials: [
                    { name: "å¿ä¸", relation: "ç›¸è¯†" },
                    { name: "ä¸»ç°¿", relation: "å‹å¥½" }
                ],
                neighbors: 95
            },
            
            // æœ¬æœˆäº‹ä»¶
            monthlyEvents: [],
            
            // æ¸¸æˆå†å²
            history: []
        };
        
        // äº‹ä»¶æ•°æ®åº“
        const eventsDatabase = {
            springEvents: [
                {
                    id: 1,
                    title: "æ˜¥è€•å®‰æ’",
                    description: "ä¸€å¹´ä¹‹è®¡åœ¨äºæ˜¥ï¼Œç”°åœ°çš„è€•ç§å®‰æ’å…³ç³»åˆ°æ•´å¹´çš„æ”¶æˆã€‚ä½œä¸ºè€•è¯»ä¼ å®¶çš„å®¶æ—ï¼Œå†œä¸šæ˜¯æ ¹åŸºã€‚ä»Šå¹´é›¨æ°´å……æ²›ï¼Œæ˜¯ä¸°æ”¶çš„å¥½å…†å¤´ã€‚",
                    options: [
                        {
                            id: "1a",
                            text: "äº²è‡ªç›‘ç£æ˜¥è€•ï¼Œç¡®ä¿ä»Šå¹´æ”¶æˆ",
                            effects: { prestige: 5, funds: -50, harmony: 2 },
                            result: "ä½ äº²è‡ªä¸‹ç”°ç›‘ç£æ˜¥è€•ï¼Œä¸ä½ƒå†œä»¬ä¸€åŒåŠ³ä½œã€‚è™½ç„¶è¾›è‹¦ï¼Œä½†çœ‹åˆ°æ•´é½çš„ç”°å„å’Œé¥±æ»¡çš„ç§å­ï¼Œä½ æ„Ÿåˆ°æ¬£æ…°ã€‚é‚»é‡Œä»¬ç§°èµä½ äº²åŠ›äº²ä¸ºï¼Œå®¶æ—å¨æœ›æå‡äº†ã€‚"
                        },
                        {
                            id: "1b",
                            text: "äº¤ç»™ç®¡äº‹å¤„ç†ï¼Œè‡ªå·±ä¸“å¿ƒç§‘ä¸¾å¤‡è€ƒ",
                            effects: { wisdom: 3, funds: -30 },
                            result: "ä½ å°†æ˜¥è€•äº‹åŠ¡äº¤ç»™è€ç®¡äº‹å¤„ç†ï¼Œè‡ªå·±ä¸“å¿ƒç ”è¯»å››ä¹¦äº”ç»ã€‚è™½ç„¶ç®¡äº‹ç»éªŒä¸°å¯Œï¼Œä½†ç¼ºä¹ä½ çš„ç›‘ç£ï¼Œéƒ¨åˆ†ç”°åœ°è€•ä½œä¸å¤Ÿç²¾ç»†ï¼Œå¯èƒ½å½±å“æ”¶æˆã€‚"
                        },
                        {
                            id: "1c",
                            text: "åŠ¨å‘˜å…¨å®¶å‚ä¸ï¼ŒåŸ¹å…»å­å—£åŠ³ä½œæ„è¯†",
                            effects: { harmony: 5, childrenHealth: 2, funds: -20 },
                            result: "ä½ å¸¦é¢†å…¨å®¶å‚ä¸æ˜¥è€•ï¼Œæ­£å›æ¸…è·è´Ÿè´£é€èŒ¶é€æ°´ï¼Œå­©å­ä»¬åœ¨ç”°è¾¹å­¦ä¹ å†œäº‹ã€‚é•¿å­æ–‡è½©å¯¹å†œè€•äº§ç”Ÿäº†å…´è¶£ï¼Œæ¬¡å­æ–‡æµ©ç©å¾—å¼€å¿ƒã€‚å®¶åº­å‡èšåŠ›å¢å¼ºäº†ã€‚"
                        }
                    ]
                },
                {
                    id: 2,
                    title: "ä¸Šå·³èŠ‚è¸é’",
                    description: "ä¸‰æœˆä¸‰ä¸Šå·³èŠ‚ï¼Œä¸´å®‰å¿å°†ä¸¾åŠè¸é’æ¸¸å›­ä¼šã€‚è¿™æ˜¯æœªå©šå“¥å„¿ç»“è¯†è‰¯ç¼˜çš„å¥½æœºä¼šï¼Œä¹Ÿæ˜¯å±•ç¤ºå®¶æ—æ•™å…»çš„åœºåˆã€‚",
                    options: [
                        {
                            id: "2a",
                            text: "å¸¦æ‰€æœ‰é€‚é¾„å“¥å„¿å‚åŠ ï¼Œå¯»æ‰¾è‰¯ç¼˜",
                            effects: { prestige: 3, funds: -80, childrenCharm: 5 },
                            result: "ä½ å¸¦ç€ç‰ç‘¶å’Œå…¨å®¶å‚åŠ ä¸Šå·³èŠ‚ã€‚ç‰ç‘¶çš„ä»ªæ€å­¦ä¹ åˆè§æˆæ•ˆï¼Œä¸¾æ­¢å¾—ä½“ï¼Œå¸å¼•äº†æ•°å®¶å…¬å­çš„æ³¨æ„ã€‚èµµå®¶å…¬å­ä¼¼ä¹å¯¹ç‰ç‘¶é¢‡ä¸ºæ¬£èµã€‚"
                        },
                        {
                            id: "2b",
                            text: "åªå¸¦é•¿å“¥å„¿å‚åŠ ï¼Œç²¾å¿ƒå‡†å¤‡",
                            effects: { prestige: 4, funds: -100, childCharm: 8 },
                            result: "ä½ ä¸ºç‰ç‘¶ç²¾å¿ƒå‡†å¤‡äº†æ–°è¡£å’Œé¦–é¥°ï¼Œåªå¸¦ä»–ä¸€äººå‚åŠ ã€‚ç‰ç‘¶åœ¨æ¸¸å›­ä¼šä¸Šè¡¨ç°ä¼˜é›…ï¼Œå¿ä¸å¤«äººç§°èµä»–æœ‰å¤§å®¶é£èŒƒã€‚"
                        },
                        {
                            id: "2c",
                            text: "ä¸å‚åŠ ï¼Œåœ¨å®¶ä¸¾åŠå°å‹è¯—ä¼š",
                            effects: { childrenWisdom: 4, funds: -40 },
                            result: "ä½ åœ¨å®¶ä¸¾åŠå°å‹è¯—ä¼šï¼Œé‚€è¯·äº†å‡ ä½ä¹¦ç”Ÿå’Œå“¥å„¿ã€‚ç‰ç‘¶åœ¨è¯—ä¼šä¸ŠèƒŒè¯µäº†ã€Šè¯—ç»ã€‹ç¯‡ç« ï¼Œæ–‡è½©ä¹Ÿå±•ç¤ºäº†è¿‘æœŸæ‰€å­¦ã€‚å®¶æ—æ–‡åŒ–æ°›å›´æµ“åšäº†ã€‚"
                        }
                    ]
                },
                {
                    id: 3,
                    title: "åª’å©†è¯´äº²",
                    description: "åª’å©†ç‹æ°ä¸Šé—¨ä¸º12å²çš„é•¿å“¥å„¿é¢‚ç‰ç‘¶è¯´äº²ã€‚å¯¹æ–¹æ˜¯å¿é‡Œå¸ƒå•†æå®¶çš„æ¬¡å­ï¼Œå®¶å¢ƒæ®·å®ï¼Œä½†ä¼ é—»æœ‰äº›éª„çºµã€‚",
                    options: [
                        {
                            id: "3a",
                            text: "è¯¦ç»†æ‰“å¬å¯¹æ–¹æƒ…å†µï¼Œå†åšå†³å®š",
                            effects: { matchmakerRelation: -5, information: "è¯¦ç»†" },
                            result: "ä½ ä»”ç»†è¯¢é—®äº†æå®¶å…¬å­çš„å“è¡Œï¼Œç‹æ°è™½æœ‰äº›ä¸æ»¡ï¼Œä½†è¿˜æ˜¯é€éœ²äº†å®æƒ…ï¼šæå®¶å…¬å­ç¡®å®æœ‰äº›éª„çºµï¼Œä½†å®¶åº•ä¸°åšã€‚ä½ éœ€è¦æ›´å¤šæ—¶é—´è€ƒè™‘ã€‚"
                        },
                        {
                            id: "3b",
                            text: "å©‰æ‹’ï¼Œè®¤ä¸ºå“¥å„¿è¿˜å°ä¸æ€¥",
                            effects: { matchmakerRelation: -10, childSurveillance: -5 },
                            result: "ä½ å©‰æ‹’äº†ç‹æ°ï¼Œè¡¨ç¤ºç‰ç‘¶è¿˜å°ï¼Œæƒ³å¤šç•™å‡ å¹´ã€‚ç‹æ°ä¸å¤ªé«˜å…´åœ°ç¦»å¼€äº†ã€‚ç‰ç‘¶çŸ¥é“åæ¾äº†å£æ°”ï¼Œä»–è¿˜ä¸æ„¿è¿™ä¹ˆæ—©è°ˆå©šè®ºå«ã€‚"
                        },
                        {
                            id: "3c",
                            text: "å…ˆæ¥è§¦çœ‹çœ‹ï¼Œå®‰æ’ç›¸çœ‹",
                            effects: { matchmakerRelation: 5, funds: -30 },
                            result: "ä½ åŒæ„å®‰æ’ç›¸çœ‹ï¼Œå¹¶ç»™äº†ç‹æ°è°¢ç¤¼ã€‚ç‹æ°é«˜å…´åœ°å®‰æ’ä¸‹æœˆåˆåœ¨å¯ºåº™'å¶é‡'ã€‚ç‰ç‘¶æœ‰äº›ç´§å¼ ï¼Œä½†æ¸…è·å®‰æ…°ä»–ä¼šå¥½å¥½å‡†å¤‡ã€‚"
                        }
                    ]
                },
                {
                    id: 4,
                    title: "å®¶å¡¾æ•™è‚²",
                    description: "é•¿å­æ–‡è½©å·²åˆ°æ±‚å­¦å…³é”®æœŸï¼Œéœ€å†³å®šä»–çš„æ•™è‚²é‡ç‚¹ã€‚æ˜¯å…¨åŠ›å¤‡è€ƒç§‘ä¸¾ï¼Œè¿˜æ˜¯å…¨é¢å‘å±•ï¼Ÿ",
                    options: [
                        {
                            id: "4a",
                            text: "å…¨åŠ›å¤‡è€ƒï¼Œä¸“æ”»å››ä¹¦äº”ç»",
                            effects: { childWisdom: 6, childConstitution: -2 },
                            result: "ä½ ä¸ºæ–‡è½©è˜è¯·äº†ä¸“é—¨çš„ç»å­¦è€å¸ˆï¼Œè¯¾ç¨‹æ’å¾—æ»¡æ»¡ã€‚æ–‡è½©å¾ˆç”¨åŠŸï¼Œä½†è„¸è‰²æ—¥æ¸è‹ç™½ï¼Œä¼¼ä¹ç¼ºä¹é”»ç‚¼ã€‚"
                        },
                        {
                            id: "4b",
                            text: "æ–‡æ­¦å…¼ä¿®ï¼Œå…¨é¢å‘å±•",
                            effects: { childWisdom: 3, childConstitution: 3, funds: -60 },
                            result: "ä½ ä¸ºæ–‡è½©å®‰æ’äº†ä¸Šåˆæ–‡è¯¾ã€ä¸‹åˆæ­¦è¯¾çš„å­¦ä¹ è®¡åˆ’ã€‚æ–‡è½©æ—¢èƒ½è¯»ä¹¦ä¹Ÿèƒ½ä¹ æ­¦ï¼Œä½“è´¨å’Œå­¦è¯†éƒ½æœ‰æå‡ã€‚"
                        },
                        {
                            id: "4c",
                            text: "å°Šé‡å­©å­å…´è¶£ï¼Œè®©ä»–è‡ªå·±é€‰æ‹©",
                            effects: { childHappiness: 8, childWisdom: 1 },
                            result: "ä½ è®©æ–‡è½©è‡ªå·±é€‰æ‹©å­¦ä¹ æ–¹å‘ã€‚ä»–é€‰æ‹©äº†æ–‡è¯¾ä¸ºä¸»ï¼Œä½†è¦æ±‚æ¯å¤©æœ‰æ—¶é—´çœ‹æ‚ä¹¦ã€‚ä»–çœ‹èµ·æ¥å¾ˆå¼€å¿ƒï¼Œå­¦ä¹ ä¹Ÿæ›´ä¸»åŠ¨äº†ã€‚"
                        }
                    ]
                },
                {
                    id: 5,
                    title: "æ­£å›å…»èƒ",
                    description: "æ­£å›æ¸…è·å·²æ€€å­•ä¸‰æœˆï¼Œéœ€è¦ç‰¹åˆ«ç…§æ–™ã€‚å¦‚ä½•å®‰æ’ä»–çš„å…»èƒäº‹å®œï¼Ÿ",
                    options: [
                        {
                            id: "4a",
                            text: "ç²¾å¿ƒç…§æ–™ï¼Œè´­ä¹°ä¸Šç­‰è¡¥å“",
                            effects: { funds: -120, spouseHealth: 8, harmony: 5 },
                            result: "ä½ ä¸ºæ¸…è·è´­ä¹°äº†ç‡•çªã€é˜¿èƒ¶ç­‰ä¸Šç­‰è¡¥å“ï¼Œæ¯æ—¥äº²è‡ªæ¢æœ›ã€‚æ¸…è·é¢è‰²çº¢æ¶¦ï¼Œèƒè±¡ç¨³å›ºã€‚å…¶ä»–ä¾å›è™½æœ‰äº›ç¾¡æ…•ï¼Œä½†ç†è§£æ­£å›æœ‰å­•éœ€è¦ç‰¹åˆ«ç…§é¡¾ã€‚"
                        },
                        {
                            id: "4b",
                            text: "æŒ‰å¹³å¸¸å¯¹å¾…ï¼Œä¸è¿‡åº¦ç‰¹æ®Š",
                            effects: { funds: -40, spouseHealth: 3, harmony: -2 },
                            result: "ä½ è®¤ä¸ºæ€€å­•æ˜¯è‡ªç„¶è¿‡ç¨‹ï¼Œä¸å¿…è¿‡åº¦ç‰¹æ®Šå¯¹å¾…ã€‚æ¸…è·æœ‰äº›å¤±è½ï¼Œä½†æœªè¡¨ç°å‡ºæ¥ã€‚å¨‡å„¿ç§ä¸‹å®‰æ…°æ¸…è·ï¼Œä¸¤äººå…³ç³»æ›´äº²å¯†äº†ã€‚"
                        },
                        {
                            id: "4c",
                            text: "è¯·æ•™ç»éªŒäº§å©†ï¼Œç§‘å­¦å…»èƒ",
                            effects: { funds: -80, spouseHealth: 6, childPotential: 5 },
                            result: "ä½ è¯·æ¥å¿é‡Œæœ‰åçš„äº§å©†æŒ‡å¯¼å…»èƒã€‚äº§å©†å»ºè®®å‡è¡¡é¥®é£Ÿï¼Œé€‚åº¦æ´»åŠ¨ã€‚æ¸…è·æŒ‰æŒ‡å¯¼è°ƒå…»ï¼Œèƒè±¡è‰¯å¥½ï¼Œå­©å­å‘è‚²ä¹Ÿä¸é”™ã€‚"
                        }
                    ]
                }
            ]
        };
        
        // æ–°é—»æ•°æ®åº“
        const newsDatabase = [
            "æœå»·å‘å¸ƒæ–°å‚¬ç”Ÿä»¤ï¼Œå®¶æ—äººå£å¢é•¿å°†è·å˜‰å¥–",
            "é”¦å·çŸ¥åºœé¼“åŠ±æ¡‘èš•å…»æ®–ï¼Œæä¾›æŠ€æœ¯æŒ‡å¯¼",
            "ä¸´å®‰å¿å°†ä¸¾åŠæ˜¥å­£ç§‘ä¸¾æ¨¡æ‹Ÿè€ƒ",
            "ä¸Šå·³èŠ‚æ¸¸å›­ä¼šç­¹å¤‡ä¸­ï¼Œå„å®¶æ—ç§¯æå‡†å¤‡",
            "æ±Ÿå—æ°´ç¾ï¼Œæœå»·åŠ å¾èµ‹ç¨ä»¥èµˆç¾",
            "è¾¹å…³æˆ˜äº‹å¹³æ¯ï¼Œçš‡å¸å¤§èµ¦å¤©ä¸‹",
            "çš‡å®¤é‡‡é€‰åŒ ç±å“¥å„¿ï¼Œå¾…é‡ä¼˜åš",
            "é”¦å·ä¸ç»¸ä»·æ ¼ä¸Šæ‰¬ï¼Œæ¡‘å†œè·åˆ©",
            "ä¸´å®‰å¿æ–°å¼€ä¸€å®¶åŒ»é¦†ï¼Œä¸“æ²»å¦‡äº§ç–¾ç—…",
            "æœå»·ä¸¥æŸ¥åœŸåœ°å…¼å¹¶ï¼Œåœ°ä¸»éœ€é‡æ–°ç™»è®°ç”°äº§"
        ];
        
        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            updateDisplay();
            generateMonthlyEvents();
            showNotification("æ¸¸æˆå¼€å§‹ï¼ä½ æ˜¯é¢‚æ°å®¶æ—çš„æ—é•¿ï¼Œè¯·è°¨æ…å†³ç­–ï¼Œå¸¦é¢†å®¶æ—èµ°å‘ç¹è£ã€‚", "success");
        }
        
        // æ›´æ–°æ˜¾ç¤º
        function updateDisplay() {
            // æ›´æ–°æ—¶é—´æ˜¾ç¤º
            const seasonNames = {1:"æ˜¥",2:"æ˜¥",3:"æ˜¥",4:"å¤",5:"å¤",6:"å¤",7:"ç§‹",8:"ç§‹",9:"ç§‹",10:"å†¬",11:"å†¬",12:"å†¬"};
            const monthNames = ["æ­£","äºŒ","ä¸‰","å››","äº”","å…­","ä¸ƒ","å…«","ä¹","å","åä¸€","åäºŒ"];
            
            document.getElementById('time-display').textContent = 
                `å¤§å‘¨ç‹æœ Â· æ°¸æ˜Œ${gameState.year}å¹´ Â· ${seasonNames[gameState.month]}${monthNames[gameState.month-1]}æœˆ`;
            
            document.getElementById('current-time').textContent = 
                `æ°¸æ˜Œ${gameState.year}å¹´${seasonNames[gameState.month]}${monthNames[gameState.month-1]}æœˆåˆäº”`;
            
            document.getElementById('current-location').textContent = 
                `${gameState.region} Â· ${gameState.county} Â· ${gameState.village}`;
            
            // æ›´æ–°å®¶æ—ä¿¡æ¯
            document.getElementById('family-style').textContent = gameState.familyStyle;
            document.getElementById('fortune-value').textContent = `${gameState.fortune}%`;
            document.getElementById('fortune-bar').style.width = `${gameState.fortune}%`;
            document.getElementById('fortune-bar').textContent = `${gameState.fortune}%`;
            
            document.getElementById('prestige-value').textContent = `${gameState.prestige}/100`;
            document.getElementById('prestige-bar').style.width = `${gameState.prestige}%`;
            document.getElementById('prestige-bar').textContent = `${gameState.prestige}%`;
            
            document.getElementById('family-funds').textContent = `${gameState.funds.toLocaleString()} ä¸¤`;
            
            document.getElementById('harmony-value').textContent = `${gameState.harmony}/100`;
            document.getElementById('harmony-bar').style.width = `${gameState.harmony}%`;
            document.getElementById('harmony-bar').textContent = `${gameState.harmony}%`;
            
            // éšæœºé€‰æ‹©ä¸€æ¡æ–°é—»
            const randomNews = newsDatabase[Math.floor(Math.random() * newsDatabase.length)];
            document.getElementById('current-news').textContent = randomNews;
            
            // æ›´æ–°æœˆä»½æ‘˜è¦
            updateMonthSummary();
        }
        
        // æ›´æ–°æœˆä»½æ‘˜è¦
        function updateMonthSummary() {
            const summaries = [
                "æ˜¥è€•æ—¶èŠ‚å·²è‡³ï¼Œéœ€åˆ†é…åŠ³åŠ›å®‰æ’å†œäº‹ï¼›å¿é‡Œå°†ä¸¾åŠä¸Šå·³èŠ‚è¸é’ï¼Œå¯å¸¦å“¥å„¿å‚ä¸ï¼›åª’å©†ç‹æ°ä¸Šé—¨ä¸ºé•¿å“¥å„¿è¯´äº²ã€‚",
                "å†œäº‹ç¹å¿™ï¼Œéœ€ç›‘ç£ç”°é—´ç®¡ç†ï¼›é•¿å­æ–‡è½©å­¦ä¹ é‡åˆ°ç“¶é¢ˆï¼Œéœ€å…³æ³¨ï¼›æ­£å›æ¸…è·å­•æœŸååº”åŠ é‡ï¼Œéœ€ç‰¹åˆ«ç…§æ–™ã€‚",
                "æ¡‘èš•å…»æ®–è¿›å…¥å…³é”®æœŸï¼Œéœ€å“¥å„¿ç»†å¿ƒç…§æ–™ï¼›å¿é‡Œä¸¾åŠè¯—ä¼šï¼Œå¯å¸¦å­å—£å‚åŠ ï¼›æ¬¡å­æ–‡æµ©å³å°†æ»¡å…­å²ï¼Œéœ€å®‰æ’å…¥å­¦ã€‚",
                "å¤å­£ç‚çƒ­ï¼Œéœ€å‡†å¤‡æ¶ˆæš‘ç‰©èµ„ï¼›ç«¯åˆå°†è‡³ï¼Œå¯å®‰æ’å®¶æ—æ´»åŠ¨ï¼›åº—é“ºè´¦ç›®éœ€è¦æ ¸æŸ¥ï¼Œé˜²æ­¢ç®¡äº‹ä¸­é¥±ç§å›Šã€‚"
            ];
            
            const summaryIndex = (gameState.month - 1) % 4;
            document.getElementById('month-summary').textContent = summaries[summaryIndex];
        }
        
        // ç”Ÿæˆæ¯æœˆäº‹ä»¶
        function generateMonthlyEvents() {
            const eventsSection = document.getElementById('events-section');
            eventsSection.innerHTML = '';
            
            // æ ¹æ®å­£èŠ‚é€‰æ‹©äº‹ä»¶
            let eventsPool = eventsDatabase.springEvents;
            
            // éšæœºé€‰æ‹©5ä¸ªäº‹ä»¶
            const selectedEvents = [];
            const usedIds = new Set();
            
            while(selectedEvents.length < 5 && selectedEvents.length < eventsPool.length) {
                const randomIndex = Math.floor(Math.random() * eventsPool.length);
                const event = eventsPool[randomIndex];
                
                if(!usedIds.has(event.id)) {
                    selectedEvents.push(event);
                    usedIds.add(event.id);
                }
            }
            
            // ä¿å­˜åˆ°æ¸¸æˆçŠ¶æ€
            gameState.monthlyEvents = selectedEvents;
            
            // ç”Ÿæˆäº‹ä»¶å¡ç‰‡
            selectedEvents.forEach(event => {
                const eventCard = document.createElement('div');
                eventCard.className = 'event-card';
                eventCard.innerHTML = `
                    <div class="event-title">${event.title}</div>
                    <div class="event-description">${event.description}</div>
                    <div class="event-options">
                        ${event.options.map(option => `
                            <div class="event-option" onclick="selectEventOption(${event.id}, '${option.id}')">
                                ${option.text}
                            </div>
                        `).join('')}
                    </div>
                `;
                eventsSection.appendChild(eventCard);
            });
        }
        
        // é€‰æ‹©äº‹ä»¶é€‰é¡¹
        function selectEventOption(eventId, optionId) {
            if(gameState.actionPoints <= 0) {
                showNotification("æœ¬æœˆè¡ŒåŠ¨ç‚¹å·²ç”¨å®Œï¼Œè¯·æ¨è¿›åˆ°ä¸‹ä¸ªæœˆã€‚", "error");
                return;
            }
            
            // æ‰¾åˆ°å¯¹åº”äº‹ä»¶å’Œé€‰é¡¹
            const event = gameState.monthlyEvents.find(e => e.id === eventId);
            const option = event.options.find(o => o.id === optionId);
            
            if(!event || !option) {
                showNotification("é€‰æ‹©æ— æ•ˆï¼Œè¯·é‡è¯•ã€‚", "error");
                return;
            }
            
            // æ¶ˆè€—è¡ŒåŠ¨ç‚¹
            gameState.actionPoints--;
            
            // åº”ç”¨æ•ˆæœ
            applyEffects(option.effects);
            
            // æ˜¾ç¤ºç»“æœ
            showEventResult(event.title, option.result, option.effects);
            
            // è®°å½•å†å²
            gameState.history.push({
                month: gameState.month,
                year: gameState.year,
                event: event.title,
                choice: option.text,
                result: option.result
            });
            
            // æ£€æŸ¥æ˜¯å¦ç”¨å®Œè¡ŒåŠ¨ç‚¹
            if(gameState.actionPoints <= 0) {
                showNotification("æœ¬æœˆè¡ŒåŠ¨ç‚¹å·²ç”¨å®Œï¼Œè¯·ç‚¹å‡»'ç»§ç»­'æ¨è¿›åˆ°ä¸‹ä¸ªæœˆã€‚", "info");
            }
        }
        
        // åº”ç”¨æ•ˆæœ
        function applyEffects(effects) {
            // æ›´æ–°æ¸¸æˆçŠ¶æ€
            if(effects.prestige) {
                gameState.prestige = Math.min(100, Math.max(0, gameState.prestige + effects.prestige));
            }
            if(effects.funds) {
                gameState.funds = Math.max(0, gameState.funds + effects.funds);
            }
            if(effects.harmony) {
                gameState.harmony = Math.min(100, Math.max(0, gameState.harmony + effects.harmony));
            }
            if(effects.fortune) {
                gameState.fortune = Math.min(100, Math.max(0, gameState.fortune + effects.fortune));
            }
            
            // æ›´æ–°æ˜¾ç¤º
            updateDisplay();
        }
        
        // æ˜¾ç¤ºäº‹ä»¶ç»“æœ
        function showEventResult(eventTitle, result, effects) {
            let effectsText = "";
            if(effects) {
                const effectsList = [];
                if(effects.prestige) effectsList.push(`å¨æœ›${effects.prestige > 0 ? '+' : ''}${effects.prestige}`);
                if(effects.funds) effectsList.push(`èµ„é‡‘${effects.funds > 0 ? '+' : ''}${effects.funds}ä¸¤`);
                if(effects.harmony) effectsList.push(`å’Œè°åº¦${effects.harmony > 0 ? '+' : ''}${effects.harmony}`);
                if(effectsList.length > 0) {
                    effectsText = `<br><br><strong>æ•ˆæœï¼š</strong>${effectsList.join('ï¼Œ')}`;
                }
            }
            
            document.getElementById('event-result-title').textContent = eventTitle;
            document.getElementById('event-result-content').innerHTML = `
                <div style="margin-bottom: 15px;">${result}</div>
                ${effectsText}
                <div style="margin-top: 15px; padding: 10px; background: #FFF0F5; border-radius: 8px;">
                    <strong>å‰©ä½™è¡ŒåŠ¨ç‚¹ï¼š</strong>${gameState.actionPoints}/${gameState.maxActionPoints}
                </div>
            `;
            
            openModal('event-result-modal');
        }
        
        // ç»§ç»­åˆ°ä¸‹ä¸ªæœˆ
        function continueToNextMonth() {
            if(gameState.actionPoints > 0) {
                if(!confirm(`æœ¬æœˆè¿˜æœ‰${gameState.actionPoints}ä¸ªè¡ŒåŠ¨ç‚¹æœªä½¿ç”¨ï¼Œç¡®å®šè¦æ¨è¿›åˆ°ä¸‹ä¸ªæœˆå—ï¼Ÿ`)) {
                    return;
                }
            }
            
            // æ¨è¿›æ—¶é—´
            gameState.month++;
            if(gameState.month > 12) {
                gameState.month = 1;
                gameState.year++;
                
                // æ›´æ–°å­£èŠ‚
                const seasonMap = {1:"æ˜¥",2:"æ˜¥",3:"æ˜¥",4:"å¤",5:"å¤",6:"å¤",7:"ç§‹",8:"ç§‹",9:"ç§‹",10:"å†¬",11:"å†¬",12:"å†¬"};
                gameState.season = seasonMap[gameState.month];
                
                // å¹´ç»ˆç»“ç®—
                yearEndSettlement();
            }
            
            // é‡ç½®è¡ŒåŠ¨ç‚¹
            gameState.actionPoints = gameState.maxActionPoints;
            
            // éšæœºäº‹ä»¶
            randomEvents();
            
            // æ›´æ–°æ˜¾ç¤ºå’Œç”Ÿæˆæ–°äº‹ä»¶
            updateDisplay();
            generateMonthlyEvents();
            
            showNotification(`æ—¶é—´æ¨è¿›åˆ°ï¼šæ°¸æ˜Œ${gameState.year}å¹´${gameState.season}å­£`, "success");
        }
        
        // å¹´ç»ˆç»“ç®—
        function yearEndSettlement() {
            let settlementText = `æ°¸æ˜Œ${gameState.year-1}å¹´ç»ˆç»“ï¼š<br><br>`;
            
            // è®¡ç®—äººå£å˜åŒ–
            const populationChange = Math.floor(Math.random() * 3) - 1; // -1, 0, 1
            if(populationChange > 0) {
                settlementText += `ğŸ‰ å®¶æ—æ·»ä¸è¿›å£ï¼Œæ–°å¢${populationChange}åæˆå‘˜<br>`;
            } else if(populationChange < 0) {
                settlementText += `ğŸ˜” å®¶æ—äººå£å‡å°‘${-populationChange}äºº<br>`;
            } else {
                settlementText += `ğŸ“Š å®¶æ—äººå£ä¿æŒç¨³å®š<br>`;
            }
            
            // è®¡ç®—èµ„é‡‘å˜åŒ–
            const income = Math.floor(gameState.prestige / 10) * 100 + Math.floor(Math.random() * 200);
            const expenses = 300 + Math.floor(Math.random() * 200);
            const netIncome = income - expenses;
            gameState.funds += netIncome;
            
            settlementText += `ğŸ’° å¹´åº¦æ”¶å…¥ï¼š${income}ä¸¤ï¼Œæ”¯å‡ºï¼š${expenses}ä¸¤ï¼Œå‡€æ”¶å…¥ï¼š${netIncome > 0 ? '+' : ''}${netIncome}ä¸¤<br>`;
            
            // æ£€æŸ¥å‚¬ç”Ÿä»¤
            if(gameState.year % 5 === 0) {
                if(populationChange > 0) {
                    settlementText += `ğŸ† æœå»·å˜‰å¥–ï¼šå®¶æ—äººå£å¢é•¿ï¼Œèµç‰ŒåŒ¾"å–„ç§¯ä¹‹å®¶"ï¼Œèµé“¶100ä¸¤<br>`;
                    gameState.funds += 100;
                    gameState.prestige += 10;
                } else {
                    settlementText += `âš ï¸ æœå»·è­¦å‘Šï¼šå®¶æ—äººå£æœªå¢é•¿ï¼Œç½šé“¶50ä¸¤<br>`;
                    gameState.funds -= 50;
                }
            }
            
            // æ˜¾ç¤ºç»“ç®—
            setTimeout(() => {
                showNotification(settlementText, "info", 8000);
            }, 1000);
        }
        
        // éšæœºäº‹ä»¶
        function randomEvents() {
            const random = Math.random();
            
            if(random < 0.3) { // 30%æ¦‚ç‡è§¦å‘éšæœºäº‹ä»¶
                const events = [
                    {
                        title: "äº²æˆšå€Ÿé’±",
                        description: "è¿œæˆ¿è¡¨äº²ä¸Šé—¨å€Ÿé’±ï¼Œè¯´å®¶é‡Œé­äº†ç¾ï¼Œéœ€è¦50ä¸¤é“¶å­æ¸¡è¿‡éš¾å…³ã€‚",
                        options: [
                            { text: "æ…·æ…¨è§£å›Š", effects: { funds: -50, fortune: 5 }, result: "ä½ å€Ÿç»™è¡¨äº²50ä¸¤é“¶å­ï¼Œä»–åƒæ©ä¸‡è°¢åœ°ç¦»å¼€äº†ã€‚é‚»é‡Œç§°èµä½ é‡æƒ…é‡ä¹‰ã€‚" },
                            { text: "å©‰æ‹’è¯·æ±‚", effects: { prestige: -3 }, result: "ä½ ä»¥å®¶æ—èµ„é‡‘ç´§å¼ ä¸ºç”±å©‰æ‹’äº†ã€‚è¡¨äº²å¤±æœ›ç¦»å¼€ï¼Œå¯èƒ½å½±å“äº²æˆšå…³ç³»ã€‚" },
                            { text: "å€Ÿä¸€éƒ¨åˆ†ï¼Œ20ä¸¤", effects: { funds: -20, fortune: 2 }, result: "ä½ å€Ÿäº†20ä¸¤é“¶å­ï¼Œè¡¨äº²è™½æœ‰äº›å¤±æœ›ï¼Œä½†è¿˜æ˜¯æ„Ÿè°¢ä½ çš„å¸®åŠ©ã€‚" }
                        ]
                    },
                    {
                        title: "æ¡åˆ°è½éš¾è€…",
                        description: "å®¶ä»†åœ¨é—¨å£å‘ç°ä¸€åæ˜è¿·çš„å“¥å„¿ï¼Œè¡£è¡«è¤´è¤›ï¼Œä¼¼ä¹æ˜¯é€ƒéš¾æ¥çš„ã€‚",
                        options: [
                            { text: "æ”¶ç•™æ•‘æ²»", effects: { funds: -30, harmony: -5 }, result: "ä½ æ”¶ç•™äº†è¿™åå“¥å„¿ï¼Œè¯·å¤§å¤«ä¸ºä»–æ²»ç—…ã€‚ä»–é†’æ¥åè‡ªç§°æ˜¯é€ƒå©šå‡ºæ¥çš„ï¼Œè¯·æ±‚åº‡æŠ¤ã€‚" },
                            { text: "æŠ¥å®˜å¤„ç†", effects: { prestige: 2 }, result: "ä½ æŠ¥å®˜å¤„ç†ï¼Œå®˜åºœæ¥äººå¸¦èµ°äº†å“¥å„¿ã€‚åæ¥å¬è¯´ä»–æ˜¯æŸå¯Œå•†å®¶é€ƒå‡ºæ¥çš„ä¾å›ã€‚" },
                            { text: "ç»™äº›é“¶é’±æ‰“å‘", effects: { funds: -10 }, result: "ä½ ç»™äº†å“¥å„¿ä¸€äº›é“¶é’±å’Œå¹²ç²®ï¼Œè®©ä»–è‡ªè¡Œç¦»å¼€ã€‚ä»–æ„Ÿæ¿€åœ°ç£•å¤´åç¦»å»äº†ã€‚" }
                        ]
                    }
                ];
                
                const event = events[Math.floor(Math.random() * events.length)];
                
                setTimeout(() => {
                    showRandomEvent(event);
                }, 1500);
            }
        }
        
        // æ˜¾ç¤ºéšæœºäº‹ä»¶
        function showRandomEvent(event) {
            document.getElementById('event-result-title').textContent = "éšæœºäº‹ä»¶ï¼š" + event.title;
            document.getElementById('event-result-content').innerHTML = `
                <div style="margin-bottom: 15px;">${event.description}</div>
                <div class="event-options" style="margin-top: 15px;">
                    ${event.options.map((option, index) => `
                        <div class="event-option" onclick="selectRandomEventOption(${index}, ${JSON.stringify(event.options[index].effects)}, '${event.options[index].result}')">
                            ${option.text}
                        </div>
                    `).join('')}
                </div>
            `;
            
            openModal('event-result-modal');
        }
        
        // é€‰æ‹©éšæœºäº‹ä»¶é€‰é¡¹
        function selectRandomEventOption(optionIndex, effects, result) {
            applyEffects(effects);
            
            document.getElementById('event-result-content').innerHTML = `
                <div style="margin-bottom: 15px;">${result}</div>
                <div style="margin-top: 15px; padding: 10px; background: #FFF0F5; border-radius: 8px;">
                    éšæœºäº‹ä»¶å·²å¤„ç†ï¼Œæ¸¸æˆç»§ç»­ã€‚
                </div>
            `;
        }
        
        // æ˜¾ç¤ºæ—¥å¸¸å†…å®¹
        function showDailyContent() {
            const dailyText = generateDailyContent();
            document.getElementById('daily-content').innerHTML = dailyText;
            openModal('daily-modal');
        }
        
        // ç”Ÿæˆæ—¥å¸¸å†…å®¹ï¼ˆçº¦1800å­—ï¼‰
        function generateDailyContent() {
            const dailyTemplates = [
                `
                <h3 style="color: #C2185B; margin-bottom: 15px;">æ°¸æ˜Œ${gameState.year}å¹´${gameState.season}å­£çš„æ—¥å¸¸ç”Ÿæ´»</h3>
                
                <p style="margin-bottom: 15px;">æ¸…æ™¨çš„ç¬¬ä¸€ç¼•é˜³å…‰é€è¿‡é›•èŠ±çª—æ£‚ï¼Œæ´’åœ¨é¢‚å®¶å®…é™¢ä¸­ã€‚æ—é•¿é¢‚æ˜è¿œæ—©æ—©èµ·èº«ï¼Œåœ¨åº­é™¢ä¸­ç»ƒä¹ äº†ä¸€å¥—å…»ç”Ÿæ‹³æ³•ã€‚ä½œä¸ºé¢‚æ°å®¶æ—çš„æŒèˆµäººï¼Œä»–æ·±çŸ¥å¥åº·ä½“é­„çš„é‡è¦æ€§ã€‚</p>
                
                <p style="margin-bottom: 15px;">æ­£å›æ—æ¸…è·å·²æœ‰å­•ä¸‰æœˆï¼Œè¿‘æ—¥æ™¨èµ·æ—¶ç•¥æœ‰ä¸é€‚ã€‚è´´èº«ä¾å„¿å°ç¿ ç»†å¿ƒåœ°ä¸ºä»–ç«¯æ¥æ¸©æ°´å’Œæ¢…å­ï¼Œç¼“è§£å­•åã€‚æ¸…è·è½»æŠšå¾®éš†çš„å°è…¹ï¼Œè„¸ä¸Šæ´‹æº¢ç€å³å°†ä¸ºäººçˆ¶å“¥çš„å–œæ‚¦ã€‚ä»–ä»Šæ—¥çš„å­•ç—£åœ¨æ™¨å…‰ä¸‹æ˜¾å¾—æ ¼å¤–çº¢æ¶¦ï¼Œæ˜¯æ­£çº¢è‰²ä¸­çš„ä¸Šå“ï¼Œé¢„ç¤ºç€è¿™ä¸€èƒçš„å¥å£®ã€‚</p>
                
                <p style="margin-bottom: 15px;">ä¾§ä¾æŸ³å¨‡å„¿æ˜¯ä¸ªå¨‡æ†¨æ€§å­ï¼Œæ­¤åˆ»è¿˜åœ¨æš–è¢«ä¸­é…£ç¡ã€‚ä»–çš„å­•ç—£æ˜¯æµ…ç²‰è‰²ï¼Œè™½ä¸åŠæ­£çº¢ï¼Œä½†é…ä¸Šä»–å¨‡ç¾çš„å®¹é¢œï¼Œåˆ«æœ‰ä¸€ç•ªé£éŸµã€‚æ˜¨æ—¥ä»–å‘æ˜è¿œæ’’å¨‡ï¼Œæƒ³è¦ä¸€å¯¹æ–°è€³å ï¼Œæ˜è¿œç­”åº”ä»Šæ—¥è®©ç®¡å®¶å»é“¶æ¥¼çœ‹çœ‹ã€‚</p>
                
                <p style="margin-bottom: 15px;">ç²¾æ˜èƒ½å¹²çš„èµµæ…§å¨˜æ—©å·²èµ·èº«ï¼Œæ­£åœ¨åå…æ ¸å¯¹ä¸Šæœˆçš„è´¦ç›®ã€‚ä»–å­•ç—£ä¹Ÿæ˜¯æ­£çº¢ï¼Œä¸”æœ‰ä¸€æ‰‹å¥½ç®—ç›˜ã€‚é¢‚å®¶çš„ä¸¤é—´é“ºå­åœ¨ä»–çš„æ‰“ç†ä¸‹ï¼Œæœˆæœˆéƒ½æœ‰ç›ˆä½™ã€‚åªæ˜¯ä»–å¶å°”ä¼šè—äº›ç§æˆ¿é’±ï¼Œæ˜è¿œå¿ƒçŸ¥è‚šæ˜å´ä¸è¿‡é—®ï¼Œæ¯•ç«Ÿæ…§å¨˜ä¹Ÿä¸ºå®¶æ—è´¡çŒ®è‰¯å¤šã€‚</p>
                
                <h4 style="color: #FF85A2; margin: 20px 0 10px;">å­©å­ä»¬çš„æ™¨è¯¾</h4>
                
                <p style="margin-bottom: 15px;">é•¿å­é¢‚æ–‡è½©ä»Šå¹´å…«å²ï¼Œå·²åˆ°äº†å…³é”®çš„æ•™è‚²å¹´é¾„ã€‚æ™¨é’Ÿæ•²å“æ—¶ï¼Œä»–å·²åœ¨ä¹¦æ–‹ä¸­èƒŒè¯µã€Šè®ºè¯­ã€‹ã€‚å…ˆç”Ÿè¯´ä»–å¤©èµ„èªé¢–ï¼Œè‹¥èƒ½ä¸“å¿ƒå‘å­¦ï¼Œå°†æ¥ç§‘ä¸¾æœ‰æœ›ã€‚åªæ˜¯è¿‘æ—¥æ–‡è½©æœ‰äº›å’³å—½ï¼Œæ¸…è·å©å’å¨æˆ¿ç‚–äº†å†°ç³–é›ªæ¢¨ã€‚</p>
                
                <p style="margin-bottom: 15px;">æ¬¡å­é¢‚æ–‡æµ©æ‰äº”å²ï¼Œæ­£æ˜¯è´ªç©çš„å¹´çºªã€‚æ­¤åˆ»ä»–æ­£è¹²åœ¨é™¢ä¸­çœ‹èš‚èšæ¬å®¶ï¼Œå°æ‰‹è„å…®å…®çš„ï¼Œå¥¶çˆ¶åœ¨ä¸€æ—å“­ç¬‘ä¸å¾—ã€‚æŒ‰æ—è§„ï¼Œæ˜å¹´ä»–å°±è¯¥æ­£å¼å¯è’™äº†ã€‚</p>
                
                <p style="margin-bottom: 15px;">é•¿å“¥å„¿é¢‚ç‰ç‘¶åäºŒå²ï¼Œå·²åˆ°äº†æ³¨é‡ä»ªæ€çš„å¹´çºªã€‚ä»–çš„å­•ç—£æ˜¯æµ…ç²‰è‰²ï¼Œè¿™åœ¨å©šå«å¸‚åœºä¸Šä¸å ä¼˜åŠ¿ï¼Œå› æ­¤æ¸…è·æ›´åŠ æ³¨é‡åŸ¹å…»ä»–çš„æ‰è‰ºã€‚æ­¤åˆ»ä»–æ­£åœ¨ç»£æ¥¼ä¸Šç»ƒä¹ èµ°è·¯å§¿æ€ï¼Œå¤´é¡¶ç€ä¸€ç¢—æ°´ï¼Œå°å¿ƒç¿¼ç¿¼åœ°åœ¨æˆ¿ä¸­ç§»åŠ¨ã€‚ä»ªæ€å…ˆç”Ÿåœ¨ä¸€æ—æŒ‡ç‚¹ï¼š"è…°è¦ç›´ï¼Œæ­¥è¦ç¨³ï¼Œçœ¼ç¥è¦æŸ”è€Œä¸åªš..."</p>
                
                <p style="margin-bottom: 15px;">ä¸‰å²çš„æ¬¡å“¥å„¿é¢‚ç‰å©·è¿˜æ˜¯ä¸ªå¥¶å¨ƒå¨ƒï¼Œç”±ä¸“é—¨çš„å¥¶çˆ¶ç…§çœ‹ã€‚ä»–çš„å­•ç—£å°šæœªå®šå‹ï¼Œè¦ç­‰åˆ°åå››å²"å¼€é¢"æ—¶æ‰èƒ½ç¡®å®šé¢œè‰²ã€‚æ­¤åˆ»ä»–æ­£å’¿å’¿å‘€å‘€åœ°ç©ç€å¸ƒè€è™ï¼Œå¤©çœŸæ— é‚ªã€‚</p>
                
                <h4 style="color: #FF85A2; margin: 20px 0 10px;">åˆé—´çš„å®¶åº­æ—¶å…‰</h4>
                
                <p style="margin-bottom: 15px;">åˆè†³æ—¶åˆ†ï¼Œå…¨å®¶èšåœ¨æ­£å…ã€‚æŒ‰ç…§è§„çŸ©ï¼Œæ­£å›æ¸…è·ååœ¨æ˜è¿œå³ä¾§ï¼Œä¸¤ä½ä¾§ä¾ä¾æ¬¡ååœ¨ä¸‹é¦–ã€‚å­©å­ä»¬å¦è®¾ä¸€æ¡Œã€‚</p>
                
                <p style="margin-bottom: 15px;">ä»Šæ—¥çš„èœè‰²æ˜¯å››è¤å››ç´ ä¸€æ±¤ï¼Œæœ‰æ¸…è·çˆ±åƒçš„æ¸…è’¸é²ˆé±¼ï¼Œå¨‡å„¿å–œæ¬¢çš„ç³–é†‹æ’éª¨ï¼Œæ…§å¨˜èµèµçš„ç¿¡ç¿ è±†è…ã€‚æ˜è¿œç‰¹æ„å©å’å¨æˆ¿ä¸ºæ€€å­•çš„æ¸…è·å‡†å¤‡äº†ç‡•çªç¾¹ã€‚</p>
                
                <p style="margin-bottom: 15px;">ç”¨è†³é—´ï¼Œå¨‡å„¿æèµ·ä¸Šå·³èŠ‚æ¸¸å›­ä¼šçš„äº‹ï¼Œçœ¼ç¥ä¸­æ»¡æ˜¯æœŸå¾…ã€‚æ…§å¨˜åˆ™æ±‡æŠ¥äº†é“ºå­çš„ç»è¥æƒ…å†µï¼Œæåˆ°æœ€è¿‘ä¸ç»¸ä»·æ ¼ä¸Šæ‰¬ï¼Œå»ºè®®æ‰©å¤§æ¡‘å›­ã€‚æ¸…è·æ¸©æŸ”åœ°ç¬‘ç€ï¼Œå¶å°”ç»™å­©å­ä»¬å¤¹èœã€‚</p>
                
                <p style="margin-bottom: 15px;">æ–‡è½©è¯´èµ·å­¦å ‚ä¸Šçš„è¶£äº‹ï¼Œæ–‡æµ©åˆ™ç‚«è€€è‡ªå·±ä»Šå¤©æŠ“åˆ°äº†ä¸€åªå¤§èš‚èš±ï¼Œè¢«æ¸…è·è½»å£°è´£å¤‡ä¸å¤Ÿæ–‡é›…ã€‚ç‰ç‘¶å®‰é™åœ°ç”¨è†³ï¼Œä¸¾æ­¢å¾—ä½“ï¼Œå·²æœ‰å‡ åˆ†å¤§å®¶å“¥å„¿çš„é£èŒƒã€‚</p>
                
                <h4 style="color: #FF85A2; margin: 20px 0 10px;">åˆåçš„å„å¸å…¶èŒ</h4>
                
                <p style="margin-bottom: 15px;">åˆåï¼Œæ˜è¿œåœ¨ä¹¦æˆ¿å¤„ç†å®¶æ—äº‹åŠ¡ã€‚ç®¡å®¶é€æ¥ä½ƒå†œçš„æ˜¥è€•è¿›åº¦æŠ¥å‘Šï¼Œä¸€åˆ‡é¡ºåˆ©ã€‚è´¦æˆ¿å…ˆç”Ÿå‘ˆä¸Šæœ¬æœˆå¼€æ”¯ï¼Œæ…§å¨˜ç®¡ç†çš„é“ºå­ç›ˆåˆ©å…«åä¸¤ï¼Œç”°ç§Ÿæ”¶å…¥äº”åä¸¤ï¼Œå„é¡¹æ”¯å‡ºå…­åä¸¤ï¼Œå‡€ä½™ä¸ƒåä¸¤ã€‚</p>
                
                <p style="margin-bottom: 15px;">æ¸…è·å°æ†©åï¼Œåœ¨èŠ±å…æ¥è§äº†åª’å©†ç‹æ°ã€‚ç‹æ°æ˜¯ä¸ºç‰ç‘¶è¯´äº²æ¥çš„ï¼Œå¯¹æ–¹æ˜¯å¿é‡Œå¸ƒå•†æå®¶çš„æ¬¡å­ã€‚æ¸…è·ä»”ç»†è¯¢é—®äº†å¯¹æ–¹å®¶ä¸–ã€å“æ€§ï¼Œå¿ƒä¸­æš—è‡ªæƒè¡¡ã€‚ç‰ç‘¶æ‰åäºŒå²ï¼Œå…¶å®ä¸å¿…ç€æ€¥ï¼Œä½†å¥½å§»ç¼˜ä¹Ÿè¦æ—©æ—©ç•™æ„ã€‚</p>
                
                <p style="margin-bottom: 15px;">å¨‡å„¿åœ¨æˆ¿ä¸­è¯•æˆ´æ–°é€æ¥çš„é¦–é¥°ï¼Œå¯¹ç€ä¸€äººé«˜çš„é“œé•œå·¦ç…§å³ç…§ã€‚ä»–çš„è´´èº«ä¾å„¿å°è²å˜´ç”œåœ°å¤¸èµï¼š"å“¥å„¿æˆ´è¿™çç è€³å çœŸå¥½çœ‹ï¼Œåƒç”»é‡Œçš„äººå„¿ã€‚"å¨‡å„¿æ»¡æ„åœ°ç¬‘äº†ï¼Œåˆè¯•èµ·äº†æ–°è¡£ã€‚</p>
                
                <p style="margin-bottom: 15px;">æ…§å¨˜å»äº†é“ºå­ï¼Œäº²è‡ªæŸ¥è´¦ã€‚ä»–çœ¼ç›æ¯’ï¼Œä¸€çœ¼çœ‹å‡ºæœ‰ä¸€ç¬”è´¦ç›®ä¸å¯¹ï¼Œå«æ¥æŒæŸœç»†é—®ã€‚åŸæ¥æ˜¯æŒæŸœçš„ä¾„å­å¤šæ”¯äº†äº”ä¸¤é“¶å­ï¼Œæ…§å¨˜å½“åœºæ‰£äº†æŒæŸœåŠæœˆå·¥é’±ï¼Œç«‹äº†è§„çŸ©ã€‚</p>
                
                <p style="margin-bottom: 15px;">å­©å­ä»¬å„æœ‰å®‰æ’ï¼šæ–‡è½©ç»§ç»­åœ¨ä¹¦æ–‹å­¦ä¹ ï¼Œä¸‹åˆæ˜¯ç­–è®ºè¯¾ï¼›æ–‡æµ©è¢«å¥¶çˆ¶å¸¦å»åˆç¡ï¼›ç‰ç‘¶æœ‰ç´è¯¾ï¼Œå…ˆç”Ÿæ•™ä»–å¼¹ã€Šé«˜å±±æµæ°´ã€‹ï¼›ç‰å©·åœ¨é™¢ä¸­æ™’å¤ªé˜³ï¼Œç©ç€æ–°åšçš„å¸ƒå¨ƒå¨ƒã€‚</p>
                
                <h4 style="color: #FF85A2; margin: 20px 0 10px;">å‚æ™šçš„å®¶åº­æ¸©é¦¨</h4>
                
                <p style="margin-bottom: 15px;">å¤•é˜³è¥¿ä¸‹ï¼Œæ˜è¿œå¤„ç†å®Œäº‹åŠ¡ï¼Œæ¥åˆ°æ¸…è·æˆ¿ä¸­ã€‚æ¸…è·æ­£åœ¨ä¸ºæœªå‡ºç”Ÿçš„å­©å­ç¼åˆ¶å°è¡£ï¼Œé’ˆè„šç»†å¯†ã€‚æ˜è¿œè½»æŠšä»–çš„è‚©ï¼Œè¯¢é—®ä»Šæ—¥èº«ä½“å¦‚ä½•ã€‚æ¸…è·å¾®ç¬‘è¯´ä¸€åˆ‡éƒ½å¥½ï¼Œåªæ˜¯æœ‰äº›æƒ³åƒé…¸æ¢…ã€‚</p>
                
                <p style="margin-bottom: 15px;">æ™šè†³åï¼Œä¸€å®¶äººåœ¨åº­é™¢ä¸­æ•£æ­¥ã€‚æ˜¥æ—¥çš„æ™šé£å¸¦ç€èŠ±é¦™ï¼Œå­©å­ä»¬åœ¨é™¢ä¸­ç©è€ï¼Œå¤§äººä»¬ååœ¨äº­ä¸­é—²è¯ã€‚å¨‡å„¿å¼¹äº†ä¸€æ›²çµç¶ï¼Œæ…§å¨˜è®²äº†é“ºå­é‡Œçš„è¶£äº‹ï¼Œæ¸…è·é™é™åœ°å¬ç€ï¼Œæ‰‹ä¸è‡ªè§‰æŠ¤ç€å°è…¹ã€‚</p>
                
                <p style="margin-bottom: 15px;">å¤œå¹•é™ä¸´ï¼Œå„æˆ¿ä¾æ¬¡ç‚¹äº®ç¯ç«ã€‚æ˜è¿œä»Šå¤œå®¿åœ¨æ¸…è·æˆ¿ä¸­ï¼Œè¿™æ˜¯æ­£å›çš„ä½“é¢ï¼Œä¹Ÿæ˜¯ä»–æ€€å­•æœŸé—´åº”æœ‰çš„å…³æ€€ã€‚å¨‡å„¿è™½æœ‰äº›å¤±è½ï¼Œä½†ä¹Ÿç†è§£ã€‚æ…§å¨˜åˆ™æ— æ‰€è°“ï¼Œä»–æ›´å…³å¿ƒæ˜æ—©è¦å»æ”¶ä¸€ç¬”è´¦ã€‚</p>
                
                <p style="margin-bottom: 15px;">é¢‚å®¶å®…é™¢åœ¨å¤œè‰²ä¸­å®‰é™ä¸‹æ¥ï¼Œåªæœ‰å®ˆå¤œäººçš„ç¯ç¬¼åœ¨å»Šä¸‹ç¼“ç¼“ç§»åŠ¨ã€‚è¿™ä¸ªä»¥è€•è¯»ä¼ å®¶çš„å®¶æ—ï¼Œåœ¨è¿™å¤ªå¹³å¹´å²ä¸­ï¼Œæ­£æŒ‰ç…§æ—¢å®šçš„è½¨è¿¹ç¨³æ­¥å‰è¡Œã€‚æ˜è¿œæœ›ç€çª—å¤–çš„æ˜æœˆï¼Œæ€è€ƒç€å®¶æ—çš„æœªæ¥ï¼šæ–‡è½©çš„ç§‘ä¸¾ã€ç‰ç‘¶çš„å©šäº‹ã€æ¸…è·è…¹ä¸­çš„å­©å­ã€å®¶æ—çš„äº§ä¸šæ‰©å¼ ...åƒå¤´ä¸‡ç»ªï¼Œéƒ½éœ€è¦ä»–è¿™æ—é•¿ä¸€ä¸€è°‹åˆ’ã€‚</p>
                
                <p style="margin-bottom: 15px;">ä½†æ­¤åˆ»ï¼Œä»–å…ˆè¦ç¡®ä¿å®¶äººå®‰åº·ï¼Œå®¶æ—å’Œç¦ã€‚æ¯•ç«Ÿï¼Œåœ¨è¿™ä¸ªé‡å†œæŠ‘å•†å´æ¨å´‡åŒ ç±çš„ç‹æœé‡Œï¼Œå®¶æ—çš„å…´æ—ºä¸ä»…é è´¢å¯ŒæƒåŠ¿ï¼Œæ›´é äººä¸å…´æ—ºã€å®¶é£æ¸…æ­£ã€‚è€Œè¿™ä¸€åˆ‡ï¼Œéƒ½å§‹äºè¿™æ—¥å¸¸çš„ç‚¹ç‚¹æ»´æ»´ã€‚</p>
                `
            ];
            
            return dailyTemplates[0];
        }
        
        // æŸ¥è¯¢ä¿¡æ¯
        function queryInfo() {
            openModal('query-modal');
        }
        
        // æ‰§è¡ŒæŸ¥è¯¢
        function executeQuery() {
            const query = document.getElementById('search-input').value.trim().toLowerCase();
            const resultsDiv = document.getElementById('query-results');
            
            if(!query) {
                resultsDiv.innerHTML = `<div style="padding: 15px; background: #FFF0F5; border-radius: 8px;">è¯·è¾“å…¥æŸ¥è¯¢å†…å®¹ã€‚</div>`;
                return;
            }
            
            let results = [];
            
            // æŸ¥è¯¢äººç‰©
            if(query.includes("é¢‚") || query.includes("æ˜è¿œ") || query.includes("æ¸…è·") || query.includes("å¨‡å„¿") || query.includes("æ…§å¨˜") || 
               query.includes("æ–‡è½©") || query.includes("æ–‡æµ©") || query.includes("ç‰ç‘¶") || query.includes("ç‰å©·")) {
                
                // æ—é•¿
                if(query.includes("æ˜è¿œ") || query.includes("æ—é•¿")) {
                    results.push(`
                        <div class="character-details" style="margin-bottom: 15px;">
                            <div class="character-name">æ—é•¿ï¼šé¢‚æ˜è¿œ (å­—å¾·æ˜­)</div>
                            <div>å¹´é¾„ï¼š32å²</div>
                            <div>å…ˆå¤©èµ„è´¨ï¼šä½“é­„78 Â· æ™ºæ…§85 Â· é­…åŠ›70 Â· æ°”è¿65</div>
                            <div>èƒ½åŠ›æ•°å€¼ï¼šæ–‡æ²»82 Â· æ­¦åŠŸ61 Â· æŠ€è‰º45</div>
                            <div>æ€§æ ¼ç‰¹è´¨ï¼šç¨³é‡æŒå®¶ Â· é‡è§†æ•™è‚² Â· ç•¥æœ‰ä¿å®ˆ</div>
                            <div>èº«ä»½ï¼šé¢‚å®¶å®¶ä¸»ï¼Œè´Ÿè´£å®¶æ—æ‰€æœ‰äº‹åŠ¡å†³ç­–</div>
                        </div>
                    `);
                }
                
                // æ­£å›
                if(query.includes("æ¸…è·") || query.includes("æ­£å›")) {
                    results.push(`
                        <div class="character-details" style="margin-bottom: 15px;">
                            <div class="character-name">æ­£å›ï¼šæ—æ¸…è·</div>
                            <div>å¹´é¾„ï¼š29å² <span class="status-icon status-pregnant"></span>å­•ä¸‰æœˆ</div>
                            <div>å­•ç—£ï¼šæ­£çº¢ (å®œå®¶ç›¸ï¼Œå­•ç‡30%-40%)</div>
                            <div>æ€§æ ¼ï¼šè´¤æƒ  - è‡ªåŠ¨ç®¡ç†åé™¢ï¼Œæå‡å…¨å®¶è¥å…»å€¼</div>
                            <div>å¥åº·çŠ¶å†µï¼šè‰¯å¥½ï¼Œå­•æœŸååº”æ­£å¸¸</div>
                            <div>å­å¥³ï¼šé•¿å­é¢‚æ–‡è½©(8å²)ã€æ¬¡å­é¢‚æ–‡æµ©(5å²)</div>
                        </div>
                    `);
                }
                
                // ä¾§ä¾å¨‡å„¿
                if(query.includes("å¨‡å„¿") || query.includes("æŸ³å¨‡å„¿")) {
                    results.push(`
                        <div class="character-details" style="margin-bottom: 15px;">
                            <div class="character-name">ä¾§ä¾ï¼šæŸ³å¨‡å„¿</div>
                            <div>å¹´é¾„ï¼š24å² <span class="status-icon status-healthy"></span>å¥åº·</div>
                            <div>å­•ç—£ï¼šæµ…ç²‰ (è–„å‘½ç›¸ï¼Œå­•ç‡çº¦25%)</div>
                            <div>æ€§æ ¼ï¼šå¨‡æ†¨ - éœ€é¢‘ç¹é™ªä¼´ï¼Œå®¹æ˜“ç”Ÿå‡ºé«˜å®¹è²Œå­å—£ï¼Œä½†ä¸ä¼šåšå®¶åŠ¡</div>
                            <div>å­å¥³ï¼šé•¿å“¥å„¿é¢‚ç‰ç‘¶(12å²)</div>
                            <div>ç‰¹ç‚¹ï¼šå®¹è²Œå§£å¥½ï¼Œæ“…é•¿çµç¶ï¼Œå–œçˆ±é¦–é¥°åæœ</div>
                        </div>
                    `);
                }
                
                // ä¾§ä¾æ…§å¨˜
                if(query.includes("æ…§å¨˜") || query.includes("èµµæ…§å¨˜")) {
                    results.push(`
                        <div class="character-details" style="margin-bottom: 15px;">
                            <div class="character-name">ä¾§ä¾ï¼šèµµæ…§å¨˜</div>
                            <div>å¹´é¾„ï¼š26å² <span class="status-icon status-healthy"></span>å¥åº·</div>
                            <div>å­•ç—£ï¼šæ­£çº¢ (å®œå®¶ç›¸ï¼Œå­•ç‡30%-40%)</div>
                            <div>æ€§æ ¼ï¼šç²¾æ˜ - èƒ½ç®¡ç†åº—é“ºï¼Œå¢åŠ æ”¶å…¥ï¼Œä½†ä¼šç§è—ç§æˆ¿é’±</div>
                            <div>å­å¥³ï¼šæ¬¡å“¥å„¿é¢‚ç‰å©·(3å²)</div>
                            <div>èŒè´£ï¼šç®¡ç†é¢‚å®¶ä¸¤é—´é“ºå­ï¼Œè´Ÿè´£å®¶æ—éƒ¨åˆ†è´¦ç›®</div>
                        </div>
                    `);
                }
                
                // é•¿å­æ–‡è½©
                if(query.includes("æ–‡è½©") || query.includes("é•¿å­")) {
                    results.push(`
                        <div class="character-details" style="margin-bottom: 15px;">
                            <div class="character-name">é•¿å­ï¼šé¢‚æ–‡è½©</div>
                            <div>å¹´é¾„ï¼š8å²</div>
                            <div>æ€§åˆ«ï¼šç”·å­</div>
                            <div>èµ„è´¨ï¼šèªæ…§ - å­¦ä¹ é€Ÿåº¦å¿«ï¼Œç†è§£åŠ›å¼º</div>
                            <div>æ•™è‚²ï¼šæ–‡è¯¾ (å››ä¹¦äº”ç»ï¼Œç›®æ ‡ç§‘ä¸¾)</div>
                            <div>å¥åº·çŠ¶å†µï¼šè‰¯å¥½ï¼Œå¶æœ‰å’³å—½</div>
                            <div>ç‰¹ç‚¹ï¼šå‹¤å¥‹å¥½å­¦ï¼Œå°Šæ•¬å¸ˆé•¿ï¼Œæ˜¯ç§‘ä¸¾çš„å¥½è‹—å­</div>
                        </div>
                    `);
                }
                
                // æ¬¡å­æ–‡æµ©
                if(query.includes("æ–‡æµ©") || query.includes("æ¬¡å­")) {
                    results.push(`
                        <div class="character-details" style="margin-bottom: 15px;">
                            <div class="character-name">æ¬¡å­ï¼šé¢‚æ–‡æµ©</div>
                            <div>å¹´é¾„ï¼š5å²</div>
                            <div>æ€§åˆ«ï¼šç”·å­</div>
                            <div>èµ„è´¨ï¼šæ™®é€š - å„æ–¹é¢å‡è¡¡å‘å±•</div>
                            <div>æ•™è‚²ï¼šå¹¼å¹´æœŸï¼Œæ˜å¹´æ­£å¼å¯è’™</div>
                            <div>ç‰¹ç‚¹ï¼šæ´»æ³¼å¥½åŠ¨ï¼Œå¯¹è‡ªç„¶æ„Ÿå…´è¶£ï¼Œå–œæ¬¢å°åŠ¨ç‰©</div>
                        </div>
                    `);
                }
                
                // é•¿å“¥å„¿ç‰ç‘¶
                if(query.includes("ç‰ç‘¶") || query.includes("é•¿å“¥å„¿")) {
                    results.push(`
                        <div class="character-details" style="margin-bottom: 15px;">
                            <div class="character-name">é•¿å“¥å„¿ï¼šé¢‚ç‰ç‘¶</div>
                            <div>å¹´é¾„ï¼š12å²</div>
                            <div>æ€§åˆ«ï¼šå“¥å„¿</div>
                            <div>å­•ç—£ï¼šæµ…ç²‰ (è–„å‘½ç›¸ï¼Œå­•ç‡çº¦25%)</div>
                            <div>æ•™è‚²ï¼šé—ºå¡¾ - ä»ªæ€ç­ (å­¦ä¹ èµ°è·¯å§¿æ€ã€çœ¼ç¥æµè½¬ã€çš®è‚¤ä¿å…»ç­‰)</div>
                            <div>ç›‘è§†åº¦ï¼š45/100 (éœ€æ³¨æ„åèŠ‚ä¿æŠ¤)</div>
                            <div>ç‰¹ç‚¹ï¼šæ–‡é™ä¹–å·§ï¼Œå­¦ä¹ è®¤çœŸï¼Œå·²æœ‰åª’å©†ä¸Šé—¨è¯´äº²</div>
                            <div>ç›®æ ‡ï¼šé«˜å«å…¥å®˜å®¦æˆ–å¯Œå•†ä¹‹å®¶ä¸ºæ­£å›</div>
                        </div>
                    `);
                }
                
                // æ¬¡å“¥å„¿ç‰å©·
                if(query.includes("ç‰å©·") || query.includes("æ¬¡å“¥å„¿")) {
                    results.push(`
                        <div class="character-details" style="margin-bottom: 15px;">
                            <div class="character-name">æ¬¡å“¥å„¿ï¼šé¢‚ç‰å©·</div>
                            <div>å¹´é¾„ï¼š3å²</div>
                            <div>æ€§åˆ«ï¼šå“¥å„¿</div>
                            <div>å­•ç—£ï¼šæœªå®š (14å²"å¼€é¢"æ—¶ç¡®å®šé¢œè‰²)</div>
                            <div>æ•™è‚²ï¼šå¹¼å¹´æœŸï¼Œç”±å¥¶çˆ¶ç…§çœ‹</div>
                            <div>ç‰¹ç‚¹ï¼šå¤©çœŸå¯çˆ±ï¼Œæ˜¯å…¨å®¶çš„å°å®è´</div>
                        </div>
                    `);
                }
            }
            
            // æŸ¥è¯¢äº§ä¸š
            if(query.includes("äº§ä¸š") || query.includes("é“ºå­") || query.includes("ç”°äº§")) {
                results.push(`
                    <div style="padding: 15px; background: #FFF0F5; border-radius: 8px; margin-bottom: 15px;">
                        <div style="font-weight: bold; color: #C2185B; margin-bottom: 10px;">å®¶æ—äº§ä¸š</div>
                        <div>1. ç”°äº§ï¼šæ¡ƒèŠ±æ‘å‘¨è¾¹è‰¯ç”°50äº©ï¼Œä½ƒå†œè€•ç§ï¼Œå¹´ç§Ÿé‡‘çº¦300ä¸¤</div>
                        <div>2. é“ºå­ï¼šä¸´å®‰å¿åŸå†…ç»¸ç¼é“ºä¸€é—´ï¼Œç”±èµµæ…§å¨˜ç®¡ç†ï¼Œæœˆç›ˆåˆ©çº¦80ä¸¤</div>
                        <div>3. é“ºå­ï¼šä¸´å®‰å¿åŸå†…æ‚è´§é“ºä¸€é—´ï¼Œç”±èµµæ…§å¨˜ç›‘ç®¡ï¼Œæœˆç›ˆåˆ©çº¦40ä¸¤</div>
                        <div>4. ä½å®…ï¼šé¢‚å®¶ç¥–å®…ï¼Œä¸‰è¿›é™¢è½ï¼Œå¸¦èŠ±å›­ï¼Œä»·å€¼çº¦2000ä¸¤</div>
                        <div>æ€»èµ„äº§ä¼°å€¼ï¼šçº¦3000ä¸¤</div>
                    </div>
                `);
            }
            
            // æŸ¥è¯¢äº‹ä»¶å†å²
            if(query.includes("å†å²") || query.includes("äº‹ä»¶") || query.includes("è®°å½•")) {
                let historyHTML = `<div style="padding: 15px; background: #FFF0F5; border-radius: 8px; margin-bottom: 15px;">`;
                historyHTML += `<div style="font-weight: bold; color: #C2185B; margin-bottom: 10px;">äº‹ä»¶å†å²è®°å½•</div>`;
                
                if(gameState.history.length === 0) {
                    historyHTML += `<div>æš‚æ— å†å²è®°å½•ã€‚</div>`;
                } else {
                    // åªæ˜¾ç¤ºæœ€è¿‘5æ¡è®°å½•
                    const recentHistory = gameState.history.slice(-5).reverse();
                    recentHistory.forEach(record => {
                        historyHTML += `
                            <div style="margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px dashed #FFC1CC;">
                                <div><strong>${record.year}å¹´${record.month}æœˆï¼š</strong>${record.event}</div>
                                <div>é€‰æ‹©ï¼š${record.choice}</div>
                            </div>
                        `;
                    });
                }
                
                historyHTML += `</div>`;
                results.push(historyHTML);
            }
            
            // å¦‚æœæ²¡æœ‰åŒ¹é…ç»“æœ
            if(results.length === 0) {
                resultsDiv.innerHTML = `
                    <div style="padding: 15px; background: #FFF0F5; border-radius: 8px;">
                        æœªæ‰¾åˆ°ä¸"${query}"ç›¸å…³çš„ç»“æœã€‚<br><br>
                        å¯æŸ¥è¯¢å†…å®¹ï¼š<br>
                        1. äººç‰©å§“åï¼ˆå¦‚ï¼šé¢‚æ˜è¿œã€æ—æ¸…è·ã€é¢‚æ–‡è½©ç­‰ï¼‰<br>
                        2. äº§ä¸šä¿¡æ¯<br>
                        3. äº‹ä»¶å†å²
                    </div>
                `;
            } else {
                resultsDiv.innerHTML = results.join('');
            }
        }
        
        // æ¨¡æ€æ¡†å‡½æ•°
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }
        
        // æ˜¾ç¤ºé€šçŸ¥
        function showNotification(message, type = "info", duration = 4000) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            
            // è®¾ç½®é¢œè‰²
            if(type === "success") {
                notification.style.background = "linear-gradient(90deg, #4CAF50, #8BC34A)";
            } else if(type === "error") {
                notification.style.background = "linear-gradient(90deg, #F44336, #E91E63)";
            } else {
                notification.style.background = "linear-gradient(90deg, var(--strawberry-pink), var(--deep-pink))";
            }
            
            notification.style.display = 'block';
            
            // è‡ªåŠ¨éšè—
            setTimeout(() => {
                notification.style.display = 'none';
            }, duration);
        }
        
        // é‡å¼€æ¸¸æˆ
        function restartGame() {
            if(confirm("ç¡®å®šè¦é‡æ–°å¼€å§‹æ¸¸æˆå—ï¼Ÿæ‰€æœ‰è¿›åº¦å°†ä¸¢å¤±ã€‚")) {
                location.reload();
            }
        }
        
        // å­˜æ¡£åŠŸèƒ½ï¼ˆç®€åŒ–ç‰ˆï¼‰
        function saveGame() {
            // åœ¨å®é™…æ¸¸æˆä¸­ï¼Œè¿™é‡Œåº”è¯¥å°†æ¸¸æˆçŠ¶æ€ä¿å­˜åˆ°æœåŠ¡å™¨æˆ–æœ¬åœ°å­˜å‚¨
            showNotification("æ¸¸æˆè¿›åº¦å·²ä¿å­˜ï¼", "success");
        }
        
        // ç»‘å®šäº‹ä»¶ç›‘å¬å™¨
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–æ¸¸æˆ
            initGame();
            
            // ç»‘å®šæŒ‰é’®äº‹ä»¶
            document.getElementById('continue-btn').addEventListener('click', continueToNextMonth);
            document.getElementById('restart-btn').addEventListener('click', restartGame);
            document.getElementById('query-btn').addEventListener('click', queryInfo);
            document.getElementById('daily-btn').addEventListener('click', showDailyContent);
            document.getElementById('save-btn').addEventListener('click', saveGame);
            
            // ç»‘å®šæŸ¥è¯¢è¾“å…¥äº‹ä»¶
            document.getElementById('search-input').addEventListener('keyup', function(event) {
                if(event.key === 'Enter') {
                    executeQuery();
                }
            });
            
            // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                modal.addEventListener('click', function(event) {
                    if(event.target === this) {
                        this.style.display = 'none';
                    }
                });
            });
        });
        
        // å…¨å±€å‡½æ•°ä¾›HTMLè°ƒç”¨
        window.selectEventOption = selectEventOption;
        window.selectRandomEventOption = selectRandomEventOption;
        window.closeModal = closeModal;
        window.executeQuery = executeQuery;
    </script>
</body>
</html>